<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EyeSpy</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Baloo 2', cursive;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #f3f8ff;
    min-height: 100vh;
    margin: 0;
    position: relative;
  }

  h1 {
    margin: 20px 0;
    font-size: 2.5em;
    color: #6ad7ff;
  }

  #scoreboard {
    display: flex;
    gap: 30px;
    font-size: 1.3em;
    margin-bottom: 15px;
    align-items: center;
  }

  #game {
    display: grid;
    gap: 10px;
    margin: 20px 0;
    grid-template-columns: repeat(6, 60px);
    grid-template-rows: repeat(6, 60px);
  }

  .tile {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    border: 3px solid;
    box-sizing: border-box;
  }

  .tile:hover {
    transform: scale(1.1);
  }

  @keyframes pulse {
    0% { box-shadow: 0 0 5px 2px yellow; transform: scale(1); }
    50% { box-shadow: 0 0 15px 5px yellow; transform: scale(1.1); }
    100% { box-shadow: 0 0 5px 2px yellow; transform: scale(1); }
  }

  .highlight {
    animation: pulse 0.8s ease-in-out;
  }

  #message {
    margin-top: 10px;
    font-size: 1.2em;
    color: #ff5c5c;
  }

  .bottom-buttons {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    margin-bottom: 10px;
  }

  .bottom-buttons button {
    padding: 10px 20px;
    background-color: #6ad7ff;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.2s;
  }

  .bottom-buttons button:hover {
    background-color: #4bb0e3;
  }

  footer {
    margin-top: auto;
    padding: 10px 0;
    font-size: 0.9em;
    color: #555;
    text-align: center;
  }
</style>
</head>
<body>
<h1>EyeSpy</h1>

<div id="scoreboard">
  <div id="currentScore">Current Score: 0</div>
  <div id="highScore">Highest Score: 0</div>
  <div id="livesDisplay">Lives: 1</div>
</div>

<div id="game"></div>
<div id="message"></div>

<div class="bottom-buttons">
  <button id="buyCredits">Buy Credits</button>
  <button id="shop">Shop</button>
</div>

<footer id="footer">&copy; 2025 EyeSpy. All rights reserved.</footer>

<!-- Sound effects -->
<audio id="correctSound" src="https://www.soundjay.com/button/sounds/button-3.mp3" preload="auto"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/button/sounds/button-10.mp3" preload="auto"></audio>

<script>
let score = 0;
let highScore = 0;
let lives = 1;
const gridSize = 6;
const minDelta = 5;
const maxDelta = 100;
let currentOddIndex = null;
let audioUnlocked = false;

const correctSound = document.getElementById('correctSound');
const wrongSound = document.getElementById('wrongSound');

// Unlock audio on first click
document.body.addEventListener('click', () => {
  if(!audioUnlocked){
    correctSound.play().catch(()=>{});
    correctSound.pause();
    wrongSound.play().catch(()=>{});
    wrongSound.pause();
    audioUnlocked = true;
  }
}, { once: true });

function updateLivesDisplay() {
  const livesDiv = document.getElementById('livesDisplay');
  livesDiv.textContent = `Lives: ${lives}`;
  livesDiv.style.color = lives > 1 ? 'green' : 'red';
}

function createGame() {
  const game = document.getElementById('game');
  game.innerHTML = '';

  let difficulty = Math.min(score + 1, 25);
  const delta = Math.max(minDelta, maxDelta - ((difficulty-1) * (maxDelta - minDelta) / 24));

  const baseR = Math.floor(Math.random() * (256 - delta));
  const baseG = Math.floor(Math.random() * (256 - delta));
  const baseB = Math.floor(Math.random() * (256 - delta));

  const baseColor = `rgb(${baseR}, ${baseG}, ${baseB})`;
  const oddColor = `rgb(${baseR + delta}, ${baseG + delta}, ${baseB + delta})`;

  currentOddIndex = Math.floor(Math.random() * gridSize * gridSize);

  for(let i=0;i<gridSize*gridSize;i++){
    const tile = document.createElement('div');
    tile.classList.add('tile');
    const tileColor = i === currentOddIndex ? oddColor : baseColor;
    tile.style.backgroundColor = tileColor;
    tile.style.borderColor = tileColor;
    tile.addEventListener('click', ()=> checkTile(i===currentOddIndex, tile));
    game.appendChild(tile);
  }
}

function checkTile(isCorrect, tileClicked){
  const gameTiles = document.getElementById('game').querySelectorAll('.tile');

  if(isCorrect){
    correctSound.currentTime = 0;
    correctSound.play();

    // Tiny pop effect on correct tile
    tileClicked.style.transform = 'scale(1.2)';
    setTimeout(()=> tileClicked.style.transform = '', 150);

    score++;
    document.getElementById('currentScore').textContent = `Current Score: ${score}`;
    if(score > highScore) {
      highScore = score;
      document.getElementById('highScore').textContent = `Highest Score: ${highScore}`;
    }

    createGame();
    document.getElementById('message').textContent = '';
  } else {
    wrongSound.currentTime = 0;
    wrongSound.play();

    lives--;
    updateLivesDisplay();
    document.getElementById('message').textContent = lives > 0 
      ? 'Wrong! Life used. Click any tile to continue.' 
      : 'Game Over! Click any tile to restart.';

    // Highlight correct tile
    gameTiles[currentOddIndex].classList.add('highlight');

    // Wait for next click to continue
    gameTiles.forEach(tile=>{
      tile.addEventListener('click', ()=> { 
        document.getElementById('message').textContent = '';
        createGame();
      }, { once: true });
    });

    if(lives <= 0){
      gameTiles.forEach(tile=>{
        tile.addEventListener('click', restartGame, { once: true });
      });
    }
  }
}

function restartGame(){
  score = 0;
  lives = 1;
  document.getElementById('currentScore').textContent = `Current Score: ${score}`;
  updateLivesDisplay();
  document.getElementById('message').textContent = '';
  createGame();
}

// Bottom buttons logic (redirects)
document.getElementById('buyCredits').addEventListener('click', () => {
  window.location.href = 'https://yourBuyCreditsPage.com';
});

document.getElementById('shop').addEventListener('click', () => {
  window.location.href = 'https://yourShopPage.com';
});

updateLivesDisplay();
createGame();
</script>
</body>
</html>

